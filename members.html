<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† - ØµÙ†Ø¯ÙˆÙ‚ Ø¢Ù„ Ø¹Ø±ÙŠØ¬</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="app.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Cairo', sans-serif; background: #F5F5F5; }
        .header { background: linear-gradient(135deg, #0F4C3A, #1A7B67); padding: 1.5rem; color: white; }
        .header-content { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem; }
        .header-title h1 { font-size: 2rem; }
        .nav-btn { background: rgba(255,255,255,0.2); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; cursor: pointer; font-family: inherit; font-weight: 600; transition: 0.3s; }
        .nav-btn:hover { background: rgba(255,255,255,0.3); }
        .btn-add { background: #D4AF37; color: #0F4C3A; }
        .container { max-width: 1400px; margin: 2rem auto; padding: 0 1.5rem; }
        .filters { background: white; padding: 1.5rem; border-radius: 16px; margin-bottom: 2rem; display: flex; gap: 1rem; flex-wrap: wrap; }
        .filter-input { padding: 0.75rem 1rem; border: 2px solid #E5E5E5; border-radius: 10px; font-family: inherit; flex: 1; min-width: 200px; }
        .members-grid { display: grid; gap: 1.5rem; }
        .member-card { background: white; padding: 1.5rem; border-radius: 16px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); display: grid; grid-template-columns: auto 1fr auto; gap: 1.5rem; align-items: center; }
        .member-avatar { width: 60px; height: 60px; background: linear-gradient(135deg, #0F4C3A, #1A7B67); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #D4AF37; font-size: 1.5rem; font-weight: 800; }
        .member-info h3 { color: #0F4C3A; margin-bottom: 0.25rem; }
        .member-meta { color: #737373; font-size: 0.9rem; }
        .member-stats { display: flex; gap: 1.5rem; margin-top: 0.75rem; }
        .stat-item { display: flex; align-items: center; gap: 0.5rem; font-size: 0.875rem; }
        .badge { padding: 0.375rem 0.875rem; border-radius: 8px; font-size: 0.75rem; font-weight: 700; }
        .badge.success { background: #F0FDF4; color: #16A34A; }
        .badge.info { background: #F0F9FF; color: #0284C7; }
        .badge.warning { background: #FFF7ED; color: #EA580C; }
        .badge.danger { background: #FEF2F2; color: #DC2626; }
        .member-actions { display: flex; gap: 0.5rem; }
        .action-btn { padding: 0.625rem 1rem; border: none; border-radius: 8px; cursor: pointer; font-family: inherit; font-weight: 600; transition: 0.3s; }
        .btn-whatsapp { background: #25D366; color: white; }
        .btn-edit { background: #0284C7; color: white; }
        .btn-whatsapp:hover { background: #20BA5A; }
        .btn-edit:hover { background: #0369A1; }
        @media (max-width: 768px) {
            .member-card { grid-template-columns: 1fr; text-align: center; }
            .member-actions { justify-content: center; }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="header-title">
                <h1>ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†</h1>
                <p>Ø¥Ø¯Ø§Ø±Ø© ÙƒØ§Ù…Ù„Ø© Ù…Ø¹ ØªÙˆØ§ØµÙ„ Ù…Ø¨Ø§Ø´Ø±</p>
            </div>
            <div>
                <button class="nav-btn" onclick="window.location.href='home.html'">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                <button class="nav-btn" onclick="window.location.href='dashboard.html'">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</button>
                <button class="nav-btn" onclick="window.location.href='analytics.html'">ğŸ“ˆ Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª</button>
                <button class="nav-btn btn-add" onclick="window.location.href='member-add.html'">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø´ØªØ±Ùƒ</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="filters">
            <input type="text" class="filter-input" id="searchInput" placeholder="ğŸ” Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø±Ù…Ø² Ø£Ùˆ Ø§Ù„Ù‡Ø§ØªÙ...">
            <select class="filter-input" id="statusFilter">
                <option value="">ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>
                <option value="Ù…ØªÙ‚Ø¯Ù…">Ù…ØªÙ‚Ø¯Ù…</option>
                <option value="Ù…Ø­Ø¯Ù‘Ø«">Ù…Ø­Ø¯Ù‘Ø«</option>
                <option value="ØªØ­Ø°ÙŠØ±">ØªØ­Ø°ÙŠØ±</option>
                <option value="Ù…ØªØ£Ø®Ø±">Ù…ØªØ£Ø®Ø±</option>
            </select>
            <select class="filter-input" id="familyFilter">
                <option value="">ÙƒÙ„ Ø§Ù„Ø¹ÙˆØ§Ø¦Ù„</option>
            </select>
        </div>

        <div class="members-grid" id="membersGrid"></div>
    </div>

    <div style="text-align: center; padding: 2rem; color: #737373; margin-top: 3rem;">
        <p>ØµÙÙ†Ø¹ Ø¨ÙˆØ§Ø³Ø·Ø© ØµÙ†Ø¯ÙˆÙ‚ Ø¢Ù„ Ø¹Ø±ÙŠØ¬ Ø§Ù„ØªØ¹Ø§ÙˆÙ†ÙŠ<br>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2026</p>
    </div>

    <script>
        function renderMembers(members = fundData.members) {
            const grid = document.getElementById('membersGrid');
            grid.innerHTML = members.map(m => {
                const initials = m.name.split(' ').map(n => n[0]).join('').substring(0,2);
                return `
                    <div class="member-card">
                        <div class="member-avatar">${initials}</div>
                        <div class="member-info">
                            <h3>${m.name}</h3>
                            <p class="member-meta">${m.id} â€¢ ${m.family} â€¢ ${m.phone}</p>
                            <div class="member-stats">
                                <span class="stat-item"><i class="fas fa-wallet"></i> ${formatCurrency(m.balance)}</span>
                                <span class="stat-item"><i class="fas fa-exclamation-circle"></i> Ù…Ø³ØªØ­Ù‚: ${formatCurrency(m.due)}</span>
                                <span class="stat-item"><i class="fas fa-calendar"></i> ${formatDateShort(m.lastPayment)}</span>
                            </div>
                        </div>
                        <div class="member-actions">
                            <span class="badge ${getStatusClass(m.status)}">${m.status}</span>
                            <button class="action-btn btn-whatsapp" onclick="sendWhatsAppMessage('${m.id}')">
                                <i class="fab fa-whatsapp"></i> ÙˆØ§ØªØ³Ø§Ø¨
                            </button>
                            <button class="action-btn btn-edit" onclick="window.location.href='member-edit.html?id=${m.id}'">
                                <i class="fas fa-edit"></i> ØªØ¹Ø¯ÙŠÙ„
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Ù…Ù„Ø¡ ÙÙ„ØªØ± Ø§Ù„Ø¹ÙˆØ§Ø¦Ù„
        const families = [...new Set(fundData.members.map(m => m.family))].sort();
        document.getElementById('familyFilter').innerHTML += families.map(f => 
            `<option value="${f}">${f}</option>`
        ).join('');

        // Ø§Ù„ÙÙ„ØªØ±Ø©
        function applyFilters() {
            const search = document.getElementById('searchInput').value;
            const status = document.getElementById('statusFilter').value;
            const family = document.getElementById('familyFilter').value;
            const filtered = filterMembers(search, status, family);
            renderMembers(filtered);
        }

        document.getElementById('searchInput').addEventListener('input', applyFilters);
        document.getElementById('statusFilter').addEventListener('change', applyFilters);
        document.getElementById('familyFilter').addEventListener('change', applyFilters);

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†
        renderMembers();
    </script>
</body>
</html>